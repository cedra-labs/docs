"use strict";(self.webpackChunkcedra_docs=self.webpackChunkcedra_docs||[]).push([[7946],{2169:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"large-packages","title":"Deploying Large Move Packages","description":"This guide explains how to deploy Move packages that exceed the standard transaction size limits (>64KB) using Cedra\'s chunked publishing feature. This is essential for complex contracts with extensive code or large embedded data.","source":"@site/docs/large-packages.md","sourceDirName":".","slug":"/large-packages","permalink":"/large-packages","draft":false,"unlisted":false,"editUrl":"https://github.com/cedra-labs/docs/edit/main/docs/large-packages.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"\ud83d\udd04 Package Upgrades","permalink":"/move-package-upgrades"},"next":{"title":"\ud83e\uddea Unit Testing","permalink":"/move/testing"}}');var i=a(4848),c=a(8453);const t={},r="Deploying Large Move Packages",l={},d=[{value:"\ud83d\udcdd Complete Example",id:"-complete-example",level:3},{value:"\ud83d\udd27 How It Works",id:"-how-it-works",level:3},{value:"Next Steps",id:"next-steps",level:2}];function o(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"deploying-large-move-packages",children:"Deploying Large Move Packages"})}),"\n",(0,i.jsx)(n.p,{children:"This guide explains how to deploy Move packages that exceed the standard transaction size limits (>64KB) using Cedra's chunked publishing feature. This is essential for complex contracts with extensive code or large embedded data."}),"\n",(0,i.jsxs)(n.admonition,{title:"Prerequisites",type:"tip",children:[(0,i.jsx)(n.p,{children:"Before deploying large packages, ensure you have:"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u2705 ",(0,i.jsx)(n.a,{href:"/getting-started/cli",children:"Cedra CLI installed"})]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 ",(0,i.jsx)(n.a,{href:"/cli/usage#1-initial-configuration",children:"Account configured"})]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 ",(0,i.jsx)(n.a,{href:"/move-package-management",children:"Understanding of Move package management"})]}),"\n"]})]}),"\n",(0,i.jsx)(n.p,{children:"Use chunked publishing when:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Your package size exceeds ",(0,i.jsx)(n.strong,{children:"64KB"})]}),"\n",(0,i.jsxs)(n.li,{children:["You get ",(0,i.jsx)(n.code,{children:"MAXIMUM_TRANSACTION_SIZE_EXCEEDED"})," errors during deployment"]}),"\n",(0,i.jsx)(n.li,{children:"Your package contains multiple large modules"}),"\n",(0,i.jsx)(n.li,{children:"You have embedded large data structures in your code"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Compile Your Package in usual way"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cedra move compile\n"})}),"\n",(0,i.jsx)(n.p,{children:"Deploy with Chunked Publishing"}),"\n",(0,i.jsx)(n.admonition,{title:"LargePackages Module Addresses",type:"info",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Devnet"}),": ",(0,i.jsx)(n.code,{children:"0x3c9124028c90111d7cfd47a28fae30612e397d115c7b78f69713fb729347a77e"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Testnet"}),": Contact the Cedra team for the official address"]}),"\n"]})}),"\n",(0,i.jsx)(n.p,{children:"Deploy your large package:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cedra move publish --chunked-publish \\\n  --large-packages-module-address 0x3c9124028c90111d7cfd47a28fae30612e397d115c7b78f69713fb729347a77e \\\n  --assume-yes\n"})}),"\n",(0,i.jsx)(n.p,{children:"Expected output:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"package size 189202 bytes\nPublishing package in chunked mode will submit 4 transactions for staging and publishing code.\n\nTransaction 1 of 4: Success (0x225d1ced3f7260f750917e1626ffc31da19ad8f238a05f1b966edd3b0e36762b)\nTransaction 2 of 4: Success (0xfdcf43b6f6da0b467601a9b7a034dfbdfe5466baa0d310167f8328d3c62d9cb8)\nTransaction 3 of 4: Success (0x5ecc225eb5d3bbbae382682992ce84c3d099e54f79edb12831477224d109d75c)\nTransaction 4 of 4: Success (0x678a7cb0d2aff90ed56bcb669d26f1c7a2863b28f6d7414659415a8f4848b3b8)\n\nAll Transactions Submitted Successfully.\n"})}),"\n",(0,i.jsx)(n.h3,{id:"-complete-example",children:"\ud83d\udcdd Complete Example"}),"\n",(0,i.jsx)(n.p,{children:"For a complete working example with 9 modules that exceeds the 64KB limit, refer to the official large package example:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"https://github.com/cedra-labs/cedra-network/tree/6a991f7a8b91582266e31253e3127388a18c42e9/cedra-move/move-examples/large_packages/large_package_example",children:"\ud83d\udcc2 View Large Package Example on GitHub"})})}),"\n",(0,i.jsx)(n.p,{children:"This example contains:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Nine modules (",(0,i.jsx)(n.code,{children:"zero.move"})," through ",(0,i.jsx)(n.code,{children:"eight.move"}),") with large embedded data"]}),"\n",(0,i.jsxs)(n.li,{children:["Proper ",(0,i.jsx)(n.code,{children:"Move.toml"})," configuration"]}),"\n",(0,i.jsx)(n.li,{children:"Total package size of ~189KB requiring 4 transactions to deploy"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"You can clone and use this example directly, or create your own modules following a similar pattern."}),"\n",(0,i.jsx)(n.h3,{id:"-how-it-works",children:"\ud83d\udd27 How It Works"}),"\n",(0,i.jsx)(n.p,{children:"When deploying packages larger than 64KB, Cedra uses chunking mechanism to bypass transaction size limitations. Here's what happens behind the scenes:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Package Analysis"}),": The CLI first analyzes your compiled package to determine its total size and calculates how many transactions are needed (typically one transaction per ~50KB of data)."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Data Segmentation"}),": Your package bytecode is intelligently split into smaller chunks that fit within individual transaction limits. Each chunk maintains integrity markers to ensure proper reassembly."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Sequential Staging"}),": Each chunk is sent to the blockchain in a separate transaction. The ",(0,i.jsx)(n.code,{children:"stage_code_chunk"})," function stores these pieces in a temporary staging area associated with your account, building up the complete package piece by piece."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Final Assembly & Publication"}),": The last chunk triggers the complete deployment. The ",(0,i.jsx)(n.code,{children:"stage_code_chunk_and_publish_to_account"})," function combines all staged chunks, verifies the package integrity, publishes it to your account, and automatically cleans up the temporary storage."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"The LargePackages module provides these specialized functions to handle different deployment scenarios."}),"\n",(0,i.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Learn the basics in ",(0,i.jsx)(n.a,{href:"/move-package-management",children:"Package Management"})]}),"\n",(0,i.jsxs)(n.li,{children:["Upgrade your packages with ",(0,i.jsx)(n.a,{href:"/move-package-upgrades",children:"Move Package Upgrades"})]}),"\n",(0,i.jsxs)(n.li,{children:["Explore ",(0,i.jsx)(n.a,{href:"/cli/usage",children:"CLI commands"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>t,x:()=>r});var s=a(6540);const i={},c=s.createContext(i);function t(e){const n=s.useContext(c);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),s.createElement(c.Provider,{value:n},e.children)}}}]);